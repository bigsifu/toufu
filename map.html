<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>黄冈市到北京市驾车路线 - 百度地图</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
        /* Basic styling for the map container */
        body, html {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden; /* Prevent scrollbars on the body */
            font-family: "微软雅黑", sans-serif;
        }
        #map_container {
            width: 100%;
            height: 100%; /* Make map take full page */
        }
        /* Optional: Style for the driving route textual directions panel */
        #results_panel {
            position: absolute;
            top: 10px;
            right: 10px;
            width: 300px; /* Adjust width as needed */
            max-height: 90%; /* Adjust height as needed */
            overflow-y: auto; /* Add scroll if content overflows */
            background-color: rgba(255, 255, 255, 0.9); /* Semi-transparent white */
            border: 1px solid #ccc;
            padding: 10px;
            box-shadow: 0 2px 6px rgba(0,0,0,.3);
            z-index: 10; /* Ensure it's above the map */
            font-size: 12px;
        }
         /* Hide Baidu logo text link, but keep the image logo */
         .BMap_cpyCtrl span, .anchorBL a {
             display: none !important;
         }
    </style>
    <!-- 1. Load Baidu Maps JavaScript API - IMPORTANT: Replace YOUR_BAIDU_MAP_AK with your actual key -->
    <!-- Make sure to use HTTP or HTTPS consistently with how you host the page -->
    <script type="text/javascript" src="//api.map.baidu.com/api?v=3.0&ak=GrmGwPn6ihBEV1MHRtyozXm4kpUuGf6F"></script>
</head>
<body>
    <!-- 2. Create a div element to hold the map -->
    <div id="map_container"></div>

    <!-- 3. (Optional) Create a div to display the textual driving directions -->
    <div id="results_panel">正在加载路线详情...</div>

    <script type="text/javascript">
        // --- Baidu Map Initialization ---
        var map = new BMap.Map("map_container"); // Initialize map, linked to the div ID

        // Note: We don't set center and zoom initially,
        // as the driving route search will automatically adjust the viewport.
        // map.centerAndZoom(new BMap.Point(116.404, 39.915), 5); // Example: Center roughly

        map.enableScrollWheelZoom(true);     // Enable map zooming using scroll wheel
        map.enableContinuousZoom(true);    // Enable continuous zoom effect
        map.addControl(new BMap.NavigationControl()); // Add pan/zoom controls
        map.addControl(new BMap.ScaleControl());      // Add scale control
        map.addControl(new BMap.OverviewMapControl());// Add overview map (mini map)

        // --- Driving Route Search ---
        var startPoint = "黄冈市"; // Origin city name
        var endPoint = "北京市";   // Destination city name

        // Create Driving Route Search object
        var driving = new BMap.DrivingRoute(map, {
            renderOptions: {
                map: map,             // Render route on this map
                panel: "results_panel", // Display textual directions in this div ID
                autoViewport: true    // Automatically adjust map viewport to fit the route
            },
            onSearchComplete: function(results) {
                // Check if the search was successful
                if (driving.getStatus() == BMAP_STATUS_SUCCESS) {
                    // Get the first driving route plan
                    var plan = results.getPlan(0);
                    var distance = plan.getDistance(true); // Get distance string (e.g., "1050公里")
                    var duration = plan.getDuration(true); // Get duration string (e.g., "12小时30分钟")

                    console.log("路线规划成功！");
                    console.log("预计距离: " + distance);
                    console.log("预计时间: " + duration);

                    // Optional: Prepend summary to the results panel
                    var summaryDiv = document.createElement('div');
                    summaryDiv.style.fontWeight = 'bold';
                    summaryDiv.style.marginBottom = '10px';
                    summaryDiv.innerHTML = `从 ${startPoint} 到 ${endPoint}：<br>距离约 ${distance}，预计时间 ${duration}`;
                    var panel = document.getElementById('results_panel');
                    // Clear "loading" message only if results are valid
                    // The panel might already be populated by renderOptions
                    // panel.innerHTML = ''; // Clear previous content if needed
                    // panel.insertBefore(summaryDiv, panel.firstChild); // Add summary at the top
                } else {
                    console.error("路线规划失败: " + driving.getStatus());
                    document.getElementById('results_panel').innerHTML = "未能找到从 " + startPoint + " 到 " + endPoint + " 的驾车路线。请检查地名或网络连接。";
                    // You could display an alert or message on the page
                    alert("抱歉，未能找到有效的驾车路线。状态码：" + driving.getStatus());
                }
            },
            onSearchError: function() {
                 console.error("路线规划请求出错！");
                 document.getElementById('results_panel').innerHTML = '路线规划请求失败，请检查网络或API密钥。';
                 alert("路线规划请求失败！");
            }
        });

        // --- Execute the Search ---
        // Use city names directly, Baidu Maps API will geocode them
        driving.search(startPoint, endPoint);

    </script>
</body>
</html>
