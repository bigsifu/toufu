<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>百度地图 - 黄冈市县市区范围</title>
    <meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
    <style type="text/css">
        body, html, #map_container {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            overflow: hidden; /* Prevent scrollbars */
            font-family: "微软雅黑", sans-serif;
        }
         /* Hide Baidu logo text link, but keep the image logo */
        .BMap_cpyCtrl span, .anchorBL a {
            display: none !important;
        }
    </style>
    <!-- 1. Load Baidu Maps JavaScript API - 使用协议相对URL, 替换 YOUR_BAIDU_MAP_AK -->
    <script type="text/javascript" src="//api.map.baidu.com/api?v=3.0&ak=GrmGwPn6ihBEV1MHRtyozXm4kpUuGf6F"></script>
</head>
<body>
    <!-- 2. Create a div element to hold the map -->
    <div id="map_container"></div>

    <script type="text/javascript">
        // --- Baidu Map Initialization ---
        // Ensure BMap object exists before proceeding
        if (typeof BMap !== "undefined" && BMap.Map) {
            var map = new BMap.Map("map_container");

            // --- 设置地图中心点和缩放级别 ---
            // 黄冈市的大致中心经纬度 (可以根据需要微调)
            var centerPoint = new BMap.Point(114.879779, 30.447395);
            // 设置一个合适的缩放级别以显示整个黄冈市范围
            map.centerAndZoom(centerPoint, 9); // Zoom level 9-10 usually works for a city extent

            map.enableScrollWheelZoom(true);     // Enable map zooming using scroll wheel
            map.enableContinuousZoom(true);    // Enable continuous zoom effect
            map.addControl(new BMap.NavigationControl()); // Add pan/zoom controls
            map.addControl(new BMap.ScaleControl());      // Add scale control
            map.addControl(new BMap.OverviewMapControl());// Add overview map (mini map)

            // --- 黄冈市下辖县市区列表 ---
            // (请根据最新行政区划核对，这里基于常见认知)
            var districts = [
                "黄冈市黄州区", "黄冈市团风县", "黄冈市红安县",
                "黄冈市罗田县", "黄冈市英山县", "黄冈市浠水县",
                "黄冈市蕲春县", "黄冈市黄梅县", "黄冈市武穴市",
                "黄冈市麻城市"
            ];

            // --- 预定义一些颜色用于绘制边界 ---
            var colors = ["#FF0000", "#00FF00", "#0000FF", "#FFFF00", "#FF00FF",
                          "#00FFFF", "#FFA500", "#800080", "#008000", "#4682B4"];
            var colorIndex = 0;

            // --- 获取并绘制行政区边界 ---
            var boundary = new BMap.Boundary();

            districts.forEach(function(districtName) {
                // 为闭包创建一个局部变量存储当前颜色
                var currentStrokeColor = colors[colorIndex % colors.length];
                var currentFillColor = colors[colorIndex % colors.length]; // 可以用同色或不同色填充
                colorIndex++;

                boundary.get(districtName, function(result) {
                    if (result && result.boundaries && result.boundaries.length > 0) {
                        var boundaryCount = result.boundaries.length; // 一个行政区可能有多个不连续区域
                        console.log("找到 " + districtName + " 的边界: " + boundaryCount + " 个部分");

                        for (var i = 0; i < boundaryCount; i++) {
                            // 创建多边形覆盖物
                            var polygon = new BMap.Polygon(result.boundaries[i], {
                                strokeWeight: 2,         // 边线宽度
                                strokeColor: currentStrokeColor, // 边线颜色
                                strokeOpacity: 0.8,      // 边线透明度
                                fillColor: currentFillColor,     // 填充颜色
                                fillOpacity: 0.20        // 填充透明度 (设置低一些能看到地图底图)
                            });
                            map.addOverlay(polygon); // 将多边形添加到地图上

                            // (可选) 可以在区域中心添加标签或其他信息
                            // var center = polygon.getBounds().getCenter();
                            // var label = new BMap.Label(districtName.replace("黄冈市",""), { position: center, offset: new BMap.Size(-20, -10) });
                            // map.addOverlay(label);
                        }
                    } else {
                        console.warn("未能获取到 '" + districtName + "' 的边界数据。");
                        // 可以在页面上提示用户哪些区域未能加载
                    }
                });
            });

            console.log("已开始请求所有区县的边界数据...");

        } else {
            // Critical Error: Baidu Maps API script did not load correctly
            console.error("错误：BMap API 未能成功加载！请检查网络连接、AK是否正确以及浏览器控制台报错信息。");
            alert('错误：无法加载百度地图API！请检查AK和网络。');
            document.getElementById('map_container').innerHTML = '<div style="padding: 20px; text-align: center; color: red;">错误：无法加载百度地图API。<br>请确认您的API密钥(AK)是否正确填写，并且网络连接正常。<br>同时，请检查浏览器控制台(F12)获取详细错误信息，特别是关于AK验证失败或网络请求失败的提示。</div>';
        }
    </script>
</body>
</html>
